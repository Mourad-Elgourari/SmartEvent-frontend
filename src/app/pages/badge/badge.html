<div class="container mt-4">
  <h3 class="text-center mb-3">ðŸŽ« Generate Badge for a User</h3>

  <!-- Select User -->
  <div class="mb-4">
    <label class="form-label">Select User</label>
    <select class="form-select" [(ngModel)]="selectedUser">
      @for (user of users; track user) {
        <option [ngValue]="user">
          {{ user.username }}
        </option>
      }
    </select>
    <button
      class="btn btn-primary mt-2"
      [disabled]="!selectedUser"
      (click)="badgeGenerated = true"
      >
      Generate Badge
    </button>
  </div>

  <!-- Badge -->
  @if (badgeGenerated && selectedUser) {
    <div class="text-center mt-4">
      <div #badge class="card mx-auto p-4 shadow-lg" style="width: 400px;">
        <h5 class="card-title">{{ selectedUser.username }}</h5>
        <p><strong>Email:</strong> {{ selectedUser.email }}</p>
        <p><strong>Phone:</strong> {{ selectedUser.phone || 'â€”' }}</p>
        <p><strong>Role:</strong> {{ selectedUser.roles?.[0]?.name || 'â€”' }}</p>
        <div class="mt-3">
          <qrcode [qrdata]="qrData" [width]="120"></qrcode>
        </div>
      </div>
      <button class="btn btn-success mt-3" (click)="exportAsPDF()">
        Download as PDF
      </button>
    </div>
  }
</div>
